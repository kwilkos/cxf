<?xml version="1.0"?>
<project name="celtix-paths" basedir="../..">
    <!-- Path definitions -->

    <property name="tools.dir" location="${basedir}/tools"/>
    <property name="jaxws.home" location="${tools.dir}/jaxws-ri/20051104"/>
    
    <!-- on darwin, tools.jar does not exist -->

    <available property="tools.jar" value="${env.JAVA_HOME}/lib/tools.jar"
           file="${env.JAVA_HOME}/lib/tools.jar"/>
    <condition property="tools.jar" value="${java.home}/../lib/tools.jar">
        <and>
            <not>
                <isset property="tools.jar"/>
            </not>
            <available filepath="${java.home}/../lib/" file="tools.jar" type="file"/>
        </and>
    </condition>

    <property name="build.dir" value="${basedir}/build"/>
    <property name="build.classes.dir" location="${build.dir}/classes"/>
    <property name="build.release.dir" location="${build.dir}/release"/>
    <property name="build.package.dir" location="${build.dir}/package"/>
    <property name="build.lib.dir" location="${build.dir}/lib"/>
    <property name="celtix.jar" location="${build.lib.dir}/celtix.jar"/>
    <property name="celtix.bin.jar" location="${build.lib.dir}/celtix-bin.jar"/>

    <path id="jdk.tools.classpath">
        <pathelement location="${tools.jar}"/>
    </path>

    <path id="ant.classpath">
        <fileset dir="${tools.dir}/ant/1.6.5">
            <include name="ant.jar"/>
        </fileset>
    </path>

    <path id="jaxws.classpath">
        <fileset dir="${jaxws.home}/lib">
            <include name="*.jar"/>
        </fileset>
    </path>
    
    <path id="wsdl4j.classpath">
        <fileset dir="${tools.dir}/wsdl4j/1.5.1">
            <include name="*.jar"/>
        </fileset>
    </path>
    
    <property name="junit.jar" value="${tools.dir}/junit/3.8.1/junit.jar"/>
    <path id="junit.classpath">
        <fileset dir="${tools.dir}/junit/3.8.1">
            <include name="*.jar"/>
        </fileset>
    </path>

    <path id="velocity.classpath">
        <fileset dir="${tools.dir}/velocity/1.4">
            <include name="*.jar"/>
        </fileset>
    </path>

    <!-- property name="tomcat.local.classes" value=""/ -->
    <path id="embedded.tomcat.classpath">
        <!-- pathelement location="${tomcat.local.classes}"/ -->
        <fileset dir="${tools.dir}/tomcat/5.5.9/server/lib">
            <include name="*.jar"/>     
        </fileset>
        <fileset dir="${tools.dir}/tomcat/5.5.9/bin">
            <include name="*.jar"/>     
        </fileset>
        <fileset dir="${tools.dir}/tomcat/5.5.9/common/lib">
            <include name="*.jar"/>     
        </fileset>
    </path>

    <path id="jetty.classpath">
        <fileset dir="${tools.dir}/jetty/5.1.5rc2">
            <include name="*.jar"/>     
        </fileset>
    </path>
    
    <path id="spring.classpath">
        <fileset dir="${tools.dir}/spring/1.2.5/">
            <include name="spring-core.jar"/>
            <include name="spring-beans.jar"/>
        </fileset>
    </path>
    
    <path id="activemq.classpath">
        <fileset dir="${tools.dir}/activemq/3.2/lib/">
            <include name="*.jar"/>
        </fileset>
    </path>
    
  
    <path id="src.compile.classpath">
        <path refid="wsdl4j.classpath"/>
        <path refid="jaxws.classpath"/>
        <path refid="jetty.classpath"/>
        <path refid="spring.classpath"/>
        <path refid="activemq.classpath"/>
        <path refid="velocity.classpath"/>
        <pathelement location="${tools.jar}"/>
    </path>

    <!-- 
     This will be used to define the manifest classpath entry.
    -->
    <path id="runtime.classpath">
        <path refid="wsdl4j.classpath"/>
        <path refid="jaxws.classpath"/>
        <path refid="jetty.classpath"/>
        <path refid="spring.classpath"/>
        <path refid="activemq.classpath"/>
        <path refid="velocity.classpath"/>
    </path>

    <path id="unit.test.compile.classpath">
        <pathelement location="${basedir}/build/classes"/>
        <pathelement location="${basedir}/build/classes-tests/wsdl"/>
        <path refid="src.compile.classpath"/>
        <pathelement location="${tools.dir}/easymock/2.0/easymock.jar"/>
        <pathelement location="${tools.dir}/easymock/2.0/classextension/easymockclassextension.jar"/>
        <pathelement location="${tools.dir}/cglib/2.1.2/cglib-nodep.jar"/>
        <path refid="junit.classpath"/>
        <path refid="velocity.classpath"/>
    </path>
 
    
    <path id="emma.lib" >
      <pathelement location="${tools.dir}/emma/2.0.5312/emma.jar" />
      <pathelement location="${tools.dir}/emma/2.0.5312/emma_ant.jar"/>
    </path>

    <taskdef resource="emma_ant.properties" classpathref="emma.lib" />
    
    <path id="unit.test.classpath">
        <pathelement location="${basedir}/build/wsdl"/>
        <pathelement location="${basedir}/build/classes-instrumented"/>
        <pathelement location="${basedir}/build/classes-tests"/>
        <pathelement location="${basedir}/build/classes-tests/unit"/>
        <pathelement location="${basedir}/resources"/>
        <pathelement location="${basedir}/build/resources"/>
        <path refid="unit.test.compile.classpath"/>
        <path refid="emma.lib"/>


    </path>
    
    <path id="system.test.compile.classpath">
        <pathelement location="${basedir}/build/classes"/>
        <pathelement location="${basedir}/build/classes-tests/wsdl"/>
        <path refid="src.compile.classpath"/>
        <pathelement location="${tools.dir}/easymock/2.0/easymock.jar"/>
        <pathelement location="${tools.dir}/easymock/2.0/classextension/easymockclassextension.jar"/>
        <pathelement location="${tools.dir}/cglib/2.1.2/cglib-nodep.jar"/>
    </path>
     
    <path id="system.test.classpath">
        <pathelement location="${basedir}/build/wsdl"/>
        <path refid="system.test.compile.classpath"/>
        <pathelement location="${basedir}/build/classes-tests/unit"/>
        <pathelement location="${basedir}/build/classes-tests/system"/>
        <pathelement location="${basedir}/resources"/>
        <pathelement location="${basedir}/build/resources"/>
    </path>

    <target name="create.set_env">
        <property name="unit.test.classpath" refid="unit.test.classpath"/>
        <condition property="envmessage" value="set CLASSPATH=${unit.test.classpath};%CLASSPATH%">
            <os family="windows"/>
        </condition>
        <condition property="envext" value=".bat">
            <os family="windows"/>
        </condition>
        <property name="envmessage" value="export CLASSPATH=${unit.test.classpath}:$$CLASSPATH"/>
        <property name="envext" value=".sh"/>
        <echo file="build/set_env${envext}">${envmessage}   
        </echo>
    </target>

    <target name="echo.path">
       <pathconvert refid="${echo.path.refid}" property="path.string"/>
       <echo message="${path.string}"/>
    </target>

</project>
