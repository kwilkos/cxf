#!/bin/sh
# run the CXF wsdl2java tool 
#

me=`basename $0`
cxf_home=`dirname $0`/..

cxf_jar=$cxf_home/lib/cxf-incubator.jar

if [ ! -f $cxf_jar ]; then 
    if [ ! -f ${cxf_home}/../../target/srcbuild_env ]; then
        echo "ERROR: Unable to find cxf-incubator.jar in $cxf_home/lib"
        exit 1
    else
        . ${cxf_home}/../../target/srcbuild_env
        cxf_jar=${CXF_CLASSPATH}
    fi
fi 

#
# add the jdk's tools.jar to the classpath
#

sun_tool_path=""
if [ ! `uname` = 'Darwin' ]; then
    sun_tool_path=${JAVA_HOME}/lib/tools.jar
    if [ ! -f $sun_tool_path ]; then
	echo "ERROR: Set JAVA_HOME to the path where the J2SE 5.0 (JDK5.0) is installed"
	exit 1
    fi
fi 

log_config=$cxf_home/etc/logging.properties

cxf_schema_dir=$cxf_home/resources/schemas/wsdl

cxf_classpath=${cxf_jar}:${CLASSPATH}:${sun_tool_path}

$JAVA_HOME/bin/java -cp ${cxf_classpath} -Djava.util.logging.config.file=$log_config -Dcxf_schema_dir=%cxf_schema_dir org.apache.cxf.tools.wsdl2java.WSDLToJava "$@"





